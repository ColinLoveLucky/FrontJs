<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cascade</title>
    <style type="text/css">
        /* 全局样式 */
        ul, ol, li {
            list-style-type: none;
            vertical-align: 0;
        }

        .qx_list {
            width: 720px;
            margin: 0 auto;
            position: relative;
        }

        .qx_list ul li {
            background: #FFF;
            border: 1px solid #E5E5E5;
            width: 212px;
            margin: 5px;
            position: absolute;
        }

        .qx_picBox {
            border: 1px solid #E9E9E9;
            height: 71px;
            width: 210px;
            margin-bottom: 8px;
        }

        .qx_txt {
            font-size: 14px;
            line-height: 24px;
        }

        .qx_txt p {
            margin-bottom: 8px;
            padding-left: 13px;
        }

    </style>
    <script language="javascript" type="text/javascript" src="Js/jquery-3.2.1.min.js"></script>
</head>
<body>
<div>
    <!--效果开始-->
    <div class="qx_list">
        <ul>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic1.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        网站建设1群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic2.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        网站建设2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京SEO2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页设计2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页制作2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic3.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        网页特效1群<br/>
                        群号：12345678
                    </p>
                    <p>
                        网页素材2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        网站开发2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic4.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        网站建设2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京SEO2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic5.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        北京网页制作2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic6.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        北京网页设计2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页制作2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic7.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        网站建设2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京SEO2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页设计2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页制作2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic8.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        网站建设2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic9.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        北京网页设计2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页制作2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic10.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        北京SEO2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页设计2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic11.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        北京网页设计2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京网页制作2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
            <li class="box">
                <div class="qx_picBox"><img src="images/qx_pic12.jpg" width="210" height="71"/></div>
                <div class="qx_txt">
                    <p>
                        网站建设2群<br/>
                        群号：12345678
                    </p>
                    <p>
                        北京SEO2群<br/>
                        群号：12345678
                    </p>
                </div>
            </li>
        </ul>
        <div class="clear"></div>
    </div>
</div>
<script type="text/javascript">
    var winSize;
    var cascadeFlow = (function () {
        winSize = $(window).outerWidth(true);

        function Init() {
            var nodeWidth = $(".box").outerWidth(true);
            var colNum = parseInt($(".qx_list").width() / nodeWidth);
            var colSumHeight = [];
            for (var i = 0; i < colNum; i++)
                colSumHeight.push(0);
            $(".box").each(function () {
                var minSumHeight = colSumHeight[0];
                var index = 0;
                for (var i = 0; i < colSumHeight.length; i++) {
                    if (minSumHeight > colSumHeight[i]) {
                        minSumHeight = colSumHeight[i];
                        index = i;
                    }
                }
                $(this).css({
                    left: nodeWidth * index,
                    top: minSumHeight
                })
                colSumHeight[index] = colSumHeight[index] + $(this).outerHeight(true);
            });
        }

        $(window).on("resize", function () {
            var percent = parseFloat($(window).outerWidth(true) / winSize);
            $(".qx_list").css({
                width: 720 * percent + "px"
            });
            Init();
        });
        $(window).scroll(function () {
            // 当滚动到最底部以上100像素时， 加载新内容
            if ($(document).height() - $(this).scrollTop() - $(this).height() < 100) {
                $("ul").append(" <li class=\"box\">\n" +
                    "                <div class=\"qx_picBox\"><img src=\"images/qx_pic1.jpg\" width=\"210\" height=\"71\"/></div>\n" +
                    "                <div class=\"qx_txt\">\n" +
                    "                    <p>\n" +
                    "                        网站建设1群<br/>\n" +
                    "                        群号：12345678\n" +
                    "                    </p>\n" +
                    "                </div>\n" +
                    "            </li>");
                $("ul").append(" <li class=\"box\">\n" +
                    "                <div class=\"qx_picBox\"><img src=\"images/qx_pic4.jpg\" width=\"210\" height=\"71\"/></div>\n" +
                    "                <div class=\"qx_txt\">\n" +
                    "                    <p>\n" +
                    "                        网站建设2群<br/>\n" +
                    "                        群号：12345678\n" +
                    "                    </p>\n" +
                    "                    <p>\n" +
                    "                        北京SEO2群<br/>\n" +
                    "                        群号：12345678\n" +
                    "                    </p>\n" +
                    "                </div>\n" +
                    "            </li>");
                $("ul").append(" <li class=\"box\">\n" +
                    "                <div class=\"qx_picBox\"><img src=\"images/qx_pic8.jpg\" width=\"210\" height=\"71\"/></div>\n" +
                    "                <div class=\"qx_txt\">\n" +
                    "                    <p>\n" +
                    "                        网站建设2群<br/>\n" +
                    "                        群号：12345678\n" +
                    "                    </p>\n" +
                    "                </div>\n" +
                    "            </li>");

                Init();
            }
        });
        return {
            init: Init
        }
    })();
    cascadeFlow.init();


</script>
</body>
</html>